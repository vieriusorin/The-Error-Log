---
import HeaderLink from "./HeaderLink.astro";
---

<header
	class='fixed top-0 left-0 w-full bg-white dark:bg-gray-900 shadow-md transition-colors duration-300 z-50'
>
	<div class='container mx-auto px-4 py-3 flex items-center justify-between'>
		<!-- Logo -->
		<div class='text-lg font-bold'>
			<a href='#' class='text-blue-500 dark:text-blue-400'>The Error Log</a>
		</div>

		<!-- Menu -->
		<nav>
			<ul class='flex space-x-6 text-gray-700 dark:text-gray-300'>
				<li>
					<HeaderLink
						href='/'
						class='text-slate-900 dark:text-white hover:text-slate-500 dark:hover:text-slate-200 animate-fade-up animate-once'
					>
						Home
					</HeaderLink>
				</li>
				<li>
					<HeaderLink
						href='/blog'
						class='text-slate-900 dark:text-white hover:text-slate-500 dark:hover:text-slate-200 animate-fade-up animate-delay-100 animate-once'
					>
						Blog
					</HeaderLink>
				</li>
				<li>
					<HeaderLink
						href='/contact'
						class='text-slate-900 dark:text-white hover:text-slate-500 dark:hover:text-slate-200 animate-fade-up animate-delay-200 animate-once'
					>
						Contact
					</HeaderLink>
				</li>
			</ul>
		</nav>

		<!-- Theme Toggle Button -->
		<button
			class='theme-toggle'
			id='toggle-theme'
			type='button'
			title='Toggle theme'
			aria-label='Toggle theme'
		>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			aria-hidden="true"
			width="2em"
			height="2em"
			fill="currentColor"
			class="theme-toggle__icon"
			viewBox="0 0 32 32"
		>
			<circle
				id="sun-moon"
				cx="16"
				cy="16"
				r="9"
				class="transition-all duration-500 transform origin-center"
			/>
			<g id="rays" class="theme-toggle__rays opacity-100 transition-opacity duration-500">
				<line x1="16" y1="1" x2="16" y2="5" stroke="currentColor" stroke-width="2" />
				<line x1="16" y1="27" x2="16" y2="31" stroke="currentColor" stroke-width="2" />
				<line x1="1" y1="16" x2="5" y2="16" stroke="currentColor" stroke-width="2" />
				<line x1="27" y1="16" x2="31" y2="16" stroke="currentColor" stroke-width="2" />
				<line x1="5" y1="5" x2="8" y2="8" stroke="currentColor" stroke-width="2" />
				<line x1="24" y1="24" x2="27" y2="27" stroke="currentColor" stroke-width="2" />
				<line x1="5" y1="27" x2="8" y2="24" stroke="currentColor" stroke-width="2" />
				<line x1="24" y1="8" x2="27" y2="5" stroke="currentColor" stroke-width="2" />
			</g>
		</svg>
		</button>
	</div>
</header>

<script>
	const toggleThemeButton = document.getElementById("toggle-theme");
	const htmlElement = document.documentElement;

	// Check stored theme preference on load
	const storedTheme = localStorage.getItem("theme");
	if (storedTheme === "dark") {
		htmlElement.classList.add("dark");
		toggleThemeButton?.classList.add("theme-toggle--reversed");
	} else {
		htmlElement.classList.remove("dark");
		toggleThemeButton?.classList.remove("theme-toggle--reversed");
	}

	// Toggle theme on button click
	toggleThemeButton?.addEventListener("click", () => {
		if (htmlElement.classList.contains("dark")) {
			htmlElement.classList.remove("dark");
			toggleThemeButton.classList.remove("theme-toggle--reversed");
			localStorage.setItem("theme", "light");
		} else {
			htmlElement.classList.add("dark");
			toggleThemeButton.classList.add("theme-toggle--reversed");
			localStorage.setItem("theme", "dark");
		}
	});
</script>
